<!DOCTYPE html>
<html>
<head>
    <title>URL Shortener and Summarizer</title>
    <link rel="stylesheet" href="/static/style.css">
    <script>
        function openSummary(text) {
            alert(text);
        }
    </script>
</head>

<body>
    <h1>Smart URL Summarizer</h1>

    {% if message %}
        <p class="msg">{{ message }}</p>
    {% endif %}

    <form action="/shorten" method="POST">
        <input type="text" name="url" placeholder="Enter URL" required>
        <button type="submit">Shorten</button>
    </form>

    <h2>Saved URLs</h2>

    <table>
        <tr>
            <th>Original URL</th>
            <th>Short ID</th>
            <th>Summary</th>
            <th>Clicks</th>
            <th>Actions</th>
        </tr>

        {% for rec in records %}
        <tr>
            <td>{{ rec.original_url }}</td>
            <td>{{ rec.short_id }}</td>
            <td>
                <button onclick='openSummary({{ rec.summary | tojson | safe }})'>
                    View Summary
                </button>
            </td>
            <td>{{ rec.clicks }}</td>
            <td>
                <a class="delete-btn" href="/delete/{{ rec.short_id }}">Delete</a>
            </td>
        </tr>
        {% endfor %}
    </table>

</body>
</html>
